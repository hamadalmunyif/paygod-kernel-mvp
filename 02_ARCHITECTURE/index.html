
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Hamad Almunyif">
      
      
        <link rel="canonical" href="https://hamadalmunyif.github.io/paygod-kernel-mvp/02_ARCHITECTURE/">
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Paygod Kernel Architecture - PayGod Kernel MVP</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#paygod-kernel-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PayGod Kernel MVP" class="md-header__button md-logo" aria-label="PayGod Kernel MVP" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PayGod Kernel MVP
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Paygod Kernel Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/hamadalmunyif/paygod-kernel-mvp" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    hamadalmunyif/paygod-kernel-mvp
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../guide/introduction/" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../dev/architecture/" class="md-tabs__link">
          
  
  
  Developer Guide

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PayGod Kernel MVP" class="md-nav__button md-logo" aria-label="PayGod Kernel MVP" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    PayGod Kernel MVP
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hamadalmunyif/paygod-kernel-mvp" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    hamadalmunyif/paygod-kernel-mvp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev/contracts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contracts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="paygod-kernel-architecture">Paygod Kernel Architecture</h1>
<h2 id="1-context-problem-statement">1. Context &amp; Problem Statement</h2>
<p>Paygod Kernel is the high-assurance execution engine designed to bridge the gap between <strong>Decision Intelligence</strong> (provided by DAA) and <strong>Financial Compliance/Execution</strong>.</p>
<p>In modern fintech and regulatory environments, "deciding" what to do and "executing" that decision compliantly are distinct challenges. Existing systems often couple these tightly, leading to "Spaghetti Code" where business logic, compliance checks, and execution scripts are inextricably mixed. This makes audits difficult and changes risky.</p>
<p><strong>Paygod Kernel solves this by:</strong>
1. Decoupling the <strong>Decision</strong> (Policy/Logic) from the <strong>Execution</strong> (Mechanism).
2. Enforcing a strict, immutable <strong>Ledger</strong> of all actions.
3. Treating <strong>Compliance</strong> as code (OSCAL) rather than manual checklists.</p>
<h2 id="2-goals-non-goals">2. Goals &amp; Non-Goals</h2>
<h3 id="goals">Goals</h3>
<ul>
<li><strong>Auditability</strong>: Every state change is cryptographically verifiable.</li>
<li><strong>Modularity</strong>: New Decision Packs (DAA) can be plugged in without recompiling the Kernel.</li>
<li><strong>Resilience</strong>: The system fails safely and recovers automatically.</li>
<li><strong>Strictness</strong>: Invalid data is rejected at the boundary; no "garbage in, garbage out".</li>
<li><strong>Extensibility</strong>: Support both Community (local) and Enterprise (SaaS) deployments via the same core.</li>
</ul>
<h3 id="non-goals">Non-Goals</h3>
<ul>
<li><strong>General Purpose CMS</strong>: This is not a generic content management system.</li>
<li><strong>Real-time Trading</strong>: While fast, the Kernel prioritizes consistency and correctness over microsecond-level latency required for HFT.</li>
</ul>
<h2 id="3-system-decomposition">3. System Decomposition</h2>
<p>The architecture follows a <strong>Microservices</strong> pattern centered around a shared immutable Ledger, designed for the <strong>Open Core</strong> model.</p>
<h3 id="31-core-services-open-kernel">3.1 Core Services (Open Kernel)</h3>
<ol>
<li><strong>Ingress Gateway (API)</strong>:</li>
<li>Authenticates requests (mTLS/JWT).</li>
<li>Validates input schemas (Strict Mode).</li>
<li>
<p>Routes to appropriate internal services.</p>
</li>
<li>
<p><strong>Decision Runtime (DAA Host)</strong>:</p>
</li>
<li>Loads and executes Decision Packs.</li>
<li>Stateless execution engine.</li>
<li>
<p>Inputs: <code>Context</code> + <code>Pack</code>. Outputs: <code>Decision</code> + <code>Evidence</code>.</p>
</li>
<li>
<p><strong>Ledger Service</strong>:</p>
</li>
<li>The "Write-Only" heart of the system.</li>
<li>Appends cryptographically chained records.</li>
<li>
<p>Provides "Time Travel" queries (State at Time T).</p>
</li>
<li>
<p><strong>Executor Service</strong>:</p>
</li>
<li>Listens to Ledger events (e.g., <code>DecisionFinalized</code>).</li>
<li>Performs side effects (e.g., Send Money, Update KYC Status).</li>
<li>Idempotent design.</li>
</ol>
<h3 id="32-extension-points-interfaces">3.2 Extension Points (Interfaces)</h3>
<p>To support the Open Core model (ADR-0006), the Kernel exposes interfaces that can be swapped at runtime:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Interface</th>
<th style="text-align: left;">Community Implementation (Default)</th>
<th style="text-align: left;">Enterprise Implementation (Proprietary)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>ILedgerStore</code></td>
<td style="text-align: left;"><strong>LocalFileSystem</strong>: Appends to <code>ledger.jsonl</code> on disk.</td>
<td style="text-align: left;"><strong>S3/BlobStore</strong>: Appends to immutable object storage with WORM locking.</td>
</tr>
<tr>
<td style="text-align: left;"><code>IPolicySource</code></td>
<td style="text-align: left;"><strong>LocalDirectory</strong>: Loads YAML packs from <code>/packs</code> folder.</td>
<td style="text-align: left;"><strong>GitOps/DB</strong>: Loads packs from managed Git repo or Policy Registry.</td>
</tr>
<tr>
<td style="text-align: left;"><code>IAuthProvider</code></td>
<td style="text-align: left;"><strong>StaticToken</strong>: Simple API Key or Local User.</td>
<td style="text-align: left;"><strong>OIDC/SAML</strong>: Integration with Okta, Azure AD, Keycloak.</td>
</tr>
<tr>
<td style="text-align: left;"><code>IAuditSink</code></td>
<td style="text-align: left;"><strong>Console/File</strong>: Logs to STDOUT or file.</td>
<td style="text-align: left;"><strong>Splunk/Datadog</strong>: Forwards structured logs to SIEM.</td>
</tr>
<tr>
<td style="text-align: left;"><code>IPanicSwitch</code></td>
<td style="text-align: left;"><strong>LocalFileFlag</strong>: Checks a local lock file.</td>
<td style="text-align: left;"><strong>GlobalRedisKey</strong>: Checks a distributed Redis key for instant cluster-wide freeze.</td>
</tr>
</tbody>
</table>
<h3 id="33-boundaries">3.3 Boundaries</h3>
<ul>
<li><strong>Public Boundary</strong>: The Ingress Gateway is the only component exposed to the internet/public network.</li>
<li><strong>Trust Boundary</strong>: Services inside the mesh trust each other's identity (via mTLS) but strictly validate each other's data payloads.</li>
</ul>
<h2 id="4-deployment-modes">4. Deployment Modes</h2>
<h3 id="mode-a-standalone-community-default">Mode A: Standalone (Community Default)</h3>
<p>Optimized for developer experience and local testing.
- <strong>Single Process</strong>: All services run within one binary or a minimal <code>docker-compose</code>.
- <strong>Zero Dependencies</strong>: Uses SQLite and local files. No external DB or Cache required.
- <strong>Goal</strong>: <code>docker run paygod/kernel</code> just works in &lt; 5 seconds.</p>
<h3 id="mode-b-distributed-enterprise-scale">Mode B: Distributed (Enterprise Scale)</h3>
<p>Optimized for high availability and compliance.
- <strong>Microservices</strong>: Services deployed as separate K8s pods.
- <strong>External State</strong>: Uses Postgres/RDS, Redis, and S3.
- <strong>Goal</strong>: 99.99% SLA, Zero-Trust security mesh.</p>
<h2 id="5-key-flows">5. Key Flows</h2>
<h3 id="the-observation-measurement-impact-evidence-ledger-loop">The "Observation → Measurement → Impact → Evidence → Ledger" Loop</h3>
<ol>
<li><strong>Observation</strong>: The system ingests raw data (e.g., User Form, Credit Report).</li>
<li><strong>Measurement</strong>: DAA Packs quantify this data against criteria (e.g., Risk Score = 85/100).</li>
<li><strong>Impact</strong>: The system determines the consequence (e.g., "High Risk" -&gt; "Manual Review Required").</li>
<li><strong>Evidence</strong>: All inputs and intermediate scores are bundled as a verifiable evidence package.</li>
<li><strong>Ledger</strong>: The final Decision Record (with Evidence hash) is sealed in the Ledger.</li>
</ol>
<h2 id="6-trust-boundaries-security-model">6. Trust Boundaries &amp; Security Model</h2>
<h3 id="61-zero-trust-assumptions">6.1 Zero-Trust Assumptions</h3>
<ul>
<li>The internal network is considered hostile.</li>
<li>No service trusts another based on IP address.</li>
<li>All secrets (DB connection strings, API keys) are injected at runtime via Vault/Secrets Manager, never stored in code.</li>
</ul>
<h3 id="62-pii-data-privacy">6.2 PII &amp; Data Privacy</h3>
<ul>
<li><strong>PII Zone</strong>: User profile data is stored in a segregated <code>IdentityService</code>.</li>
<li><strong>Anonymization</strong>: The Ledger stores references (UUIDs) to users, not PII itself, wherever possible.</li>
<li><strong>Secrets</strong>: Strictly forbidden in the Ledger.</li>
</ul>
<h2 id="7-operational-model">7. Operational Model</h2>
<h3 id="71-slos-service-level-objectives">7.1 SLOs (Service Level Objectives)</h3>
<ul>
<li><strong>Availability</strong>: 99.9% (allows ~43m downtime/month).</li>
<li><strong>Latency</strong>: 95% of Decision requests &lt; 500ms.</li>
<li><strong>Durability</strong>: 99.9999999% (11 9s) for Ledger data.</li>
</ul>
<h3 id="72-failure-modes">7.2 Failure Modes</h3>
<ul>
<li><strong>Ledger Down</strong>: System enters "Read-Only" mode. No new decisions can be finalized.</li>
<li><strong>DAA Service Down</strong>: Requests queue up or fail fast (depending on priority).</li>
<li><strong>Validation Failure</strong>: Request rejected immediately with 400 Bad Request (protects system integrity).</li>
</ul>
<h3 id="73-kill-switch-panic-mode">7.3 Kill-Switch (Panic Mode)</h3>
<ul>
<li><strong>Function</strong>: Instantly freezes all Executor side-effects (e.g., stop money movement) while allowing Read/Decision operations.</li>
<li><strong>Implementation</strong>: Defined via <code>IPanicSwitch</code> interface.<ul>
<li><strong>Community</strong>: Toggled via a local file or CLI command.</li>
<li><strong>Enterprise</strong>: Toggled via API/UI, propagated globally via Redis/Consul.</li>
</ul>
</li>
</ul>
<h2 id="8-decision-links-adrs">8. Decision Links (ADRs)</h2>
<ul>
<li><a href="../docs/adr/ADR-001-json-schema.md">ADR-001: Use JSON Schema for Contracts</a></li>
<li><a href="../docs/adr/ADR-002-ledger-append-only.md">ADR-002: Immutable Ledger Strategy</a></li>
<li><a href="../docs/adr/ADR-003-tech-stack.md">ADR-003: .NET for Kernel / Python for Data Science</a></li>
<li><a href="../docs/adrs/0005-unified-cli-validator.md">ADR-005: Unified CLI Validator</a></li>
<li><a href="../docs/adrs/0006-repository-separation-strategy.md">ADR-006: Repository Separation Strategy</a></li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>